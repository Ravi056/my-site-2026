<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ravi Adhikari | Home</title>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css">
</head>
<body>
<main class="content-wrapper">
<!-- Header -->
<header class="header">
  <div class="logo">
    <a href="index.html"><h1 id="typed-name"></h1></a>
  </div>
  <nav class="nav">
    <a href="index.html">Home</a>
    <a href="about.html">About Me</a>
    <a href="contact.html">Contact Me</a>
  </nav>
</header>

<!-- Hero Section -->
<section class="hero">
  <h2 class="hero-title">Welcome to My Personal Site</h2>
  <p class="hero-subtitle">Sharing news, blogs, and my work</p>
</section>

<!-- Recent Posts Section -->
<section class="recent-posts">
  <h2>Posts by Ravi Adhikari</h2>
  <div class="posts-grid" id="recent-posts"></div>
</section>

<!-- Most Viewed Posts Carousel -->
<section class="most-viewed">
  <h2>Most Viewed Posts</h2>
  <div class="carousel" id="carousel"></div>
</section>

<!-- See More Posts Section -->
<section class="see-more-posts">
  <div class="see-more-container">
    <h2>Want to see all posts?</h2>
    <p>Click below to explore all my blogs and articles.</p>
    <a href="blogs.html" class="see-more-btn">See More Posts</a>
  </div>
</section>
</main>

<!-- Footer with Nepali Date & Time -->
<footer>
  <p>Â© 2026 Ravi Adhikari. Version 1.0. All Rights Reserved.</p>
  <p id="nepaliDateTime"></p>
</footer>

<script>
// Typing effect for logo
const text = "Ravi Adhikari";
const typedName = document.getElementById("typed-name");
let index = 0;
function type(){
  if(index < text.length){
    typedName.innerHTML += text.charAt(index);
    index++;
    setTimeout(type,150);
  }
}
window.onload = type;

// Sample posts array (preview only 4 posts)
const posts = [
  {title:"My First Blog",desc:"This is a sample post description...",img:"https://via.placeholder.com/400x250",views:200},
  {title:"Learning HTML & CSS",desc:"Tips and tricks for coding...",img:"https://via.placeholder.com/400x250",views:300},
  {title:"Responsive Design Guide",desc:"Make your site mobile-friendly...",img:"https://via.placeholder.com/400x250",views:250},
  {title:"Netlify CMS Integration",desc:"Easily manage posts without coding...",img:"https://via.placeholder.com/400x250",views:350}
];

// Render Recent Posts
const recentContainer = document.getElementById("recent-posts");
posts.sort((a,b)=>b.views-a.views).forEach(post=>{
  const card = document.createElement("div");
  card.className="post-card";
  card.innerHTML = `<img src="${post.img}" alt="${post.title}">
                    <div class="post-content">
                      <h3>${post.title}</h3>
                      <p>${post.desc}</p>
                    </div>`;
  recentContainer.appendChild(card);
});

// Render Carousel for Most Viewed
const carousel = document.getElementById("carousel");
posts.sort((a,b)=>b.views-a.views).forEach(post=>{
  const card = document.createElement("div");
  card.className="carousel-card";
  card.innerHTML = `<img src="${post.img}" alt="${post.title}">
                    <div class="carousel-content">
                      <h3>${post.title}</h3>
                      <p>${post.desc}</p>
                    </div>`;
  carousel.appendChild(card);
});

// Simple carousel autoplay
let current = 0;
function showCarousel() {
  const cards = document.querySelectorAll(".carousel-card");
  cards.forEach((c,i)=> c.style.display = i === current ? "block" : "none");
  current = (current+1)%cards.length;
}
setInterval(showCarousel, 3000);
showCarousel();

// Nepali date & time
function getNepaliDateTime(){
  const now = new Date();
  const nepTimeOptions={timeZone:'Asia/Kathmandu',hour12:false,hour:'2-digit',minute:'2-digit',second:'2-digit'};
  const nepTime = now.toLocaleTimeString('en-US',nepTimeOptions);
  const bsYear = now.getFullYear()+57;
  const bsMonth = now.getMonth()+9>12?now.getMonth()-3:now.getMonth()+9;
  const bsDay = now.getDate();
  const nepaliDate = `${bsDay.toString().padStart(2,'0')}/${bsMonth.toString().padStart(2,'0')}/${bsYear}`;
  document.getElementById("nepaliDateTime").innerText = `Nepali Date: ${nepaliDate} | Time: ${nepTime}`;
}
setInterval(getNepaliDateTime,1000);
getNepaliDateTime();

async function loadPosts() {
  const response = await fetch('/posts/index.json'); // generated by Netlify CMS
  const posts = await response.json();

  const recentContainer = document.getElementById("recent-posts");
  posts.sort((a,b)=> new Date(b.date)-new Date(a.date));
  posts.forEach(post=>{
    const card = document.createElement("div");
    card.className = "post-card";
    card.innerHTML = `
      <a href="${post.url}">
        <img src="${post.thumbnail}" alt="${post.title}">
        <div class="post-content">
          <h3>${post.title}</h3>
          <p>${post.description}</p>
        </div>
      </a>`;
    recentContainer.appendChild(card);
  });
}
loadPosts();
</script>
</body>
</html>